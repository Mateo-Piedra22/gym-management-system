{
  "timestamp": "2025-11-04T13:57:37.955946",
  "status": "completed_successfully",
  "phases": [
    {
      "phase": "backup",
      "result": {
        "status": "success",
        "backups": [
          {
            "server": "local",
            "status": "success",
            "tables": [
              {
                "table": "usuarios",
                "record_count": 4,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_usuarios.json",
                "file_size_bytes": 2423
              },
              {
                "table": "pagos",
                "record_count": 2,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_pagos.json",
                "file_size_bytes": 862
              },
              {
                "table": "metodos_pago",
                "record_count": 5,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_metodos_pago.json",
                "file_size_bytes": 1610
              },
              {
                "table": "conceptos_pago",
                "record_count": 1,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_conceptos_pago.json",
                "file_size_bytes": 314
              },
              {
                "table": "configuracion",
                "record_count": 24,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_configuracion.json",
                "file_size_bytes": 6925
              }
            ],
            "total_records": 36,
            "backup_size_bytes": 12134,
            "backup_files": [
              "cleanup_backups\\cleanup_backup_20251104_135737\\local_usuarios.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\local_pagos.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\local_metodos_pago.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\local_conceptos_pago.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\local_configuracion.json"
            ],
            "schema_backup": {
              "status": "success",
              "tables": [
                "acciones_masivas_pendientes",
                "asistencias",
                "audit_logs",
                "auditoria",
                "checkin_pending",
                "clase_asistencia_historial",
                "clase_ejercicios",
                "clase_lista_espera",
                "clase_usuarios",
                "clases",
                "clases_horarios",
                "comprobantes_pago",
                "conceptos_pago",
                "configuracion",
                "configuracion_comprobantes",
                "custom_themes",
                "ejercicio_grupo_items",
                "ejercicio_grupos",
                "ejercicios",
                "especialidades",
                "estados_usuario",
                "etiquetas",
                "historial_estados",
                "horarios_profesores",
                "metodos_pago",
                "node_state",
                "notificaciones_cupos",
                "numeracion_comprobantes",
                "pago_detalles",
                "pagos",
                "profesor_certificaciones",
                "profesor_clase_asignaciones",
                "profesor_disponibilidad",
                "profesor_especialidades",
                "profesor_evaluaciones",
                "profesor_horas_trabajadas",
                "profesor_suplencias",
                "profesor_suplencias_generales",
                "profesores",
                "profesores_horarios_disponibilidad",
                "professor_availability",
                "rutina_ejercicios",
                "rutinas",
                "scheduling_config",
                "sync_outbox",
                "theme_events",
                "theme_schedules",
                "theme_scheduling_config",
                "tipos_clases",
                "tipos_cuota",
                "usuario_estados",
                "usuario_etiquetas",
                "usuario_notas",
                "usuarios",
                "whatsapp_config",
                "whatsapp_messages",
                "whatsapp_templates"
              ],
              "backup_file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_schema.json"
            }
          },
          {
            "server": "remote",
            "status": "success",
            "tables": [
              {
                "table": "usuarios",
                "record_count": 4,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_usuarios.json",
                "file_size_bytes": 2423
              },
              {
                "table": "pagos",
                "record_count": 1,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_pagos.json",
                "file_size_bytes": 406
              },
              {
                "table": "metodos_pago",
                "record_count": 5,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_metodos_pago.json",
                "file_size_bytes": 1610
              },
              {
                "table": "conceptos_pago",
                "record_count": 1,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_conceptos_pago.json",
                "file_size_bytes": 314
              },
              {
                "table": "configuracion",
                "record_count": 24,
                "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_configuracion.json",
                "file_size_bytes": 6925
              }
            ],
            "total_records": 35,
            "backup_size_bytes": 11678,
            "backup_files": [
              "cleanup_backups\\cleanup_backup_20251104_135737\\remote_usuarios.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\remote_pagos.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\remote_metodos_pago.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\remote_conceptos_pago.json",
              "cleanup_backups\\cleanup_backup_20251104_135737\\remote_configuracion.json"
            ],
            "schema_backup": {
              "status": "success",
              "tables": [
                "acciones_masivas_pendientes",
                "asistencias",
                "audit_logs",
                "auditoria",
                "checkin_pending",
                "clase_asistencia_historial",
                "clase_ejercicios",
                "clase_lista_espera",
                "clase_usuarios",
                "clases",
                "clases_horarios",
                "comprobantes_pago",
                "conceptos_pago",
                "configuracion",
                "configuracion_comprobantes",
                "custom_themes",
                "ejercicio_grupo_items",
                "ejercicio_grupos",
                "ejercicios",
                "especialidades",
                "estados_usuario",
                "etiquetas",
                "historial_estados",
                "horarios_profesores",
                "metodos_pago",
                "node_state",
                "notificaciones_cupos",
                "numeracion_comprobantes",
                "pago_detalles",
                "pagos",
                "profesor_certificaciones",
                "profesor_clase_asignaciones",
                "profesor_disponibilidad",
                "profesor_especialidades",
                "profesor_evaluaciones",
                "profesor_horas_trabajadas",
                "profesor_suplencias",
                "profesor_suplencias_generales",
                "profesores",
                "profesores_horarios_disponibilidad",
                "rutina_ejercicios",
                "rutinas",
                "theme_schedules",
                "theme_scheduling_config",
                "tipos_clases",
                "tipos_cuota",
                "usuario_estados",
                "usuario_etiquetas",
                "usuario_notas",
                "usuarios",
                "whatsapp_config",
                "whatsapp_messages",
                "whatsapp_templates"
              ],
              "backup_file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_schema.json"
            }
          }
        ],
        "total_records": 71,
        "backup_size_bytes": 23812
      }
    },
    {
      "phase": "cleanup",
      "result": {
        "status": "success",
        "local_cleanup": {
          "server": "local",
          "status": "success",
          "tables_cleaned": 1,
          "records_removed": 5,
          "cleaned_tables": [
            {
              "table": "sync_outbox",
              "action": "delete_old_records",
              "records_removed": 5,
              "records_kept": 37
            }
          ],
          "errors": [
            {
              "table": "sync_inbox",
              "error": "no existe la relaci\u00f3n \u00absync_inbox\u00bb\nLINE 1: SELECT COUNT(*) FROM sync_inbox\n                             ^\n"
            }
          ]
        },
        "remote_cleanup": {
          "server": "remote",
          "status": "success",
          "tables_cleaned": 0,
          "records_removed": 0,
          "cleaned_tables": [],
          "errors": [
            {
              "table": "sync_outbox",
              "error": "relation \"sync_outbox\" does not exist\nLINE 1: SELECT COUNT(*) FROM sync_outbox\n                             ^\n"
            },
            {
              "table": "sync_inbox",
              "error": "current transaction is aborted, commands ignored until end of transaction block\n"
            }
          ]
        },
        "total_tables_cleaned": 1,
        "total_records_removed": 5
      }
    },
    {
      "phase": "reinit",
      "result": {
        "status": "error",
        "local_reinit": {
          "server": "local",
          "status": "success",
          "tables_optimized": 0,
          "indexes_created": 0,
          "constraints_validated": 0,
          "actions": []
        },
        "remote_reinit": {
          "server": "remote",
          "status": "success",
          "tables_optimized": 0,
          "indexes_created": 0,
          "constraints_validated": 0,
          "actions": []
        },
        "optimizations_applied": [],
        "replication_setup": {},
        "error": "'DatabaseCleanupReinitializer' object has no attribute '_apply_database_optimizations'"
      }
    },
    {
      "phase": "restore",
      "result": {
        "status": "success",
        "local_restore": {
          "server": "local",
          "status": "success",
          "tables_restored": 0,
          "records_restored": 0,
          "restored_tables": [],
          "errors": [
            {
              "table": "usuarios",
              "error": "Operaci\u00f3n no permitida: los usuarios con rol \"due\u00f1o\" son inafectables\nCONTEXT:  funci\u00f3n PL/pgSQL usuarios_bloquear_dueno_ins_upd() en la l\u00ednea 4 en RAISE\n"
            },
            {
              "table": "pagos",
              "error": "transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n"
            },
            {
              "table": "metodos_pago",
              "error": "transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n"
            },
            {
              "table": "conceptos_pago",
              "error": "transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n"
            },
            {
              "table": "configuracion",
              "error": "transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n"
            }
          ]
        },
        "remote_restore": {
          "server": "remote",
          "status": "success",
          "tables_restored": 0,
          "records_restored": 0,
          "restored_tables": [],
          "errors": [
            {
              "table": "usuarios",
              "error": "Operaci\u00f3n no permitida: los usuarios con rol \"due\u00f1o\" son inafectables\nCONTEXT:  PL/pgSQL function usuarios_bloquear_dueno_ins_upd() line 4 at RAISE\n"
            },
            {
              "table": "pagos",
              "error": "current transaction is aborted, commands ignored until end of transaction block\n"
            },
            {
              "table": "metodos_pago",
              "error": "current transaction is aborted, commands ignored until end of transaction block\n"
            },
            {
              "table": "conceptos_pago",
              "error": "current transaction is aborted, commands ignored until end of transaction block\n"
            },
            {
              "table": "configuracion",
              "error": "current transaction is aborted, commands ignored until end of transaction block\n"
            }
          ]
        },
        "total_records_restored": 0,
        "errors": []
      }
    },
    {
      "phase": "replication",
      "result": {
        "status": "failed",
        "steps": [
          {
            "step": "publisher_setup",
            "result": {
              "status": "success",
              "actions": [
                "replica_identity_full"
              ],
              "warnings": [
                "wal_level_not_logical"
              ]
            }
          },
          {
            "step": "subscriber_setup",
            "result": {
              "status": "success",
              "actions": [
                "publisher_connectivity_test"
              ]
            }
          }
        ],
        "errors": [
          "la publicaci\u00f3n \u00abgym_pub\u00bb ya existe\n"
        ]
      }
    },
    {
      "phase": "verification",
      "result": {
        "status": "success",
        "local_verification": {
          "server": "local",
          "status": "error",
          "table_count": 57,
          "critical_tables_status": {},
          "issues": [
            "Error verificando usuarios: no existe la columna \u00abcreated_at\u00bb\nLINE 4: ...                                  COUNT(CASE WHEN created_at...\n                                                             ^\n",
            "Error verificando pagos: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando asistencias: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando clases: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando profesores: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando tipos_clases: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando metodos_pago: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando conceptos_pago: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n",
            "Error verificando configuracion: transacci\u00f3n abortada, las \u00f3rdenes ser\u00e1n ignoradas hasta el fin de bloque de transacci\u00f3n\n"
          ]
        },
        "remote_verification": {
          "server": "remote",
          "status": "error",
          "table_count": 53,
          "critical_tables_status": {},
          "issues": [
            "Error verificando usuarios: column \"created_at\" does not exist\nLINE 4: ...                                  COUNT(CASE WHEN created_at...\n                                                             ^\n",
            "Error verificando pagos: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando asistencias: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando clases: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando profesores: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando tipos_clases: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando metodos_pago: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando conceptos_pago: current transaction is aborted, commands ignored until end of transaction block\n",
            "Error verificando configuracion: current transaction is aborted, commands ignored until end of transaction block\n"
          ]
        },
        "replication_status": {
          "status": "critical",
          "sync_percentage": 83.33,
          "alerts_count": 2,
          "details": {
            "timestamp": "2025-11-04T13:57:58.007557",
            "overall_status": "critical",
            "system_analysis": {
              "database_version": {
                "local": "17.6",
                "remote": "17.6"
              },
              "table_counts": {
                "usuarios": {
                  "local": 4,
                  "remote": 4,
                  "difference": 0
                },
                "pagos": {
                  "local": 2,
                  "remote": 1,
                  "difference": 1
                },
                "asistencias": {
                  "local": 0,
                  "remote": 0,
                  "difference": 0
                },
                "clases": {
                  "local": 0,
                  "remote": 0,
                  "difference": 0
                },
                "profesores": {
                  "local": 0,
                  "remote": 0,
                  "difference": 0
                }
              },
              "outbox_statistics": {
                "total_records": 42,
                "unique_tables": 13,
                "with_dedup": 42,
                "oldest_record": "2025-10-24 18:42:18.424875-03:00",
                "newest_record": "2025-11-03 19:45:01.855756-03:00",
                "table_distribution": [
                  {
                    "table": "whatsapp_config",
                    "count": 16,
                    "dedup_count": 16
                  },
                  {
                    "table": "whatsapp_templates",
                    "count": 4,
                    "dedup_count": 4
                  },
                  {
                    "table": "custom_themes",
                    "count": 4,
                    "dedup_count": 4
                  },
                  {
                    "table": "pago_detalles",
                    "count": 4,
                    "dedup_count": 4
                  },
                  {
                    "table": "pagos",
                    "count": 3,
                    "dedup_count": 3
                  },
                  {
                    "table": "usuario_estados",
                    "count": 3,
                    "dedup_count": 3
                  },
                  {
                    "table": "asistencias",
                    "count": 2,
                    "dedup_count": 2
                  },
                  {
                    "table": "clases_horarios",
                    "count": 1,
                    "dedup_count": 1
                  },
                  {
                    "table": "usuarios",
                    "count": 1,
                    "dedup_count": 1
                  },
                  {
                    "table": "ejercicio_grupo_items",
                    "count": 1,
                    "dedup_count": 1
                  }
                ],
                "operation_types": [
                  {
                    "operation": "INSERT",
                    "count": 36
                  },
                  {
                    "operation": "DELETE",
                    "count": 6
                  }
                ]
              }
            },
            "outbox_status": {
              "status": "healthy",
              "pending_operations": 42,
              "processing_rate": "unknown",
              "errors_detected": 0,
              "warnings": [],
              "recent_operations": 18,
              "no_dedup_count": 0,
              "potential_duplicates": 0
            },
            "replication_status": {
              "publications": [
                {
                  "name": "gym_pub",
                  "owner": "postgres",
                  "all_tables": false,
                  "insert": true,
                  "update": true,
                  "delete": true
                },
                {
                  "name": "gym_pub_local",
                  "owner": "postgres",
                  "all_tables": false,
                  "insert": true,
                  "update": true,
                  "delete": true
                }
              ],
              "subscriptions": [],
              "replication_slots": [],
              "status": "not_configured",
              "published_tables_count": 95,
              "replicas": []
            },
            "data_integrity": {
              "table_integrity": {
                "usuarios": {
                  "local": 4,
                  "remote": 4,
                  "difference": 0,
                  "sync_percentage": 100.0
                },
                "pagos": {
                  "local": 2,
                  "remote": 1,
                  "difference": 1,
                  "sync_percentage": 50.0
                },
                "asistencias": {
                  "local": 0,
                  "remote": 0,
                  "difference": 0,
                  "sync_percentage": 100.0
                },
                "clases": {
                  "local": 0,
                  "remote": 0,
                  "difference": 0,
                  "sync_percentage": 100.0
                },
                "profesores": {
                  "local": 0,
                  "remote": 0,
                  "difference": 0,
                  "sync_percentage": 100.0
                }
              },
              "sync_percentage": 83.33,
              "mismatches": [
                {
                  "table": "pagos",
                  "local": 2,
                  "remote": 1,
                  "difference": 1
                }
              ],
              "status": "error"
            },
            "alerts": [
              {
                "level": "critical",
                "category": "data_integrity",
                "message": "Integridad de datos cr\u00edtica: 83.33% sincronizado",
                "timestamp": "2025-11-04T13:58:18.960128"
              },
              {
                "level": "warning",
                "category": "replication",
                "message": "Replicaci\u00f3n no configurada o inactiva",
                "timestamp": "2025-11-04T13:58:18.960176"
              }
            ],
            "recommendations": [
              "Verificar y resolver diferencias en tablas cr\u00edticas",
              "Considerar re-sincronizaci\u00f3n de datos si es necesario",
              "Monitorear sistema cada 5 minutos en producci\u00f3n",
              "Configurar alertas autom\u00e1ticas para lag > 60 segundos",
              "Realizar backup antes de modificaciones en replicaci\u00f3n",
              "Documentar procedimientos de failover",
              "Considerar migraci\u00f3n a replicaci\u00f3n l\u00f3gica nativa de PostgreSQL"
            ]
          }
        },
        "overall_health": "needs_attention"
      }
    }
  ],
  "backup_summary": {
    "status": "success",
    "backups": [
      {
        "server": "local",
        "status": "success",
        "tables": [
          {
            "table": "usuarios",
            "record_count": 4,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_usuarios.json",
            "file_size_bytes": 2423
          },
          {
            "table": "pagos",
            "record_count": 2,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_pagos.json",
            "file_size_bytes": 862
          },
          {
            "table": "metodos_pago",
            "record_count": 5,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_metodos_pago.json",
            "file_size_bytes": 1610
          },
          {
            "table": "conceptos_pago",
            "record_count": 1,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_conceptos_pago.json",
            "file_size_bytes": 314
          },
          {
            "table": "configuracion",
            "record_count": 24,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_configuracion.json",
            "file_size_bytes": 6925
          }
        ],
        "total_records": 36,
        "backup_size_bytes": 12134,
        "backup_files": [
          "cleanup_backups\\cleanup_backup_20251104_135737\\local_usuarios.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\local_pagos.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\local_metodos_pago.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\local_conceptos_pago.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\local_configuracion.json"
        ],
        "schema_backup": {
          "status": "success",
          "tables": [
            "acciones_masivas_pendientes",
            "asistencias",
            "audit_logs",
            "auditoria",
            "checkin_pending",
            "clase_asistencia_historial",
            "clase_ejercicios",
            "clase_lista_espera",
            "clase_usuarios",
            "clases",
            "clases_horarios",
            "comprobantes_pago",
            "conceptos_pago",
            "configuracion",
            "configuracion_comprobantes",
            "custom_themes",
            "ejercicio_grupo_items",
            "ejercicio_grupos",
            "ejercicios",
            "especialidades",
            "estados_usuario",
            "etiquetas",
            "historial_estados",
            "horarios_profesores",
            "metodos_pago",
            "node_state",
            "notificaciones_cupos",
            "numeracion_comprobantes",
            "pago_detalles",
            "pagos",
            "profesor_certificaciones",
            "profesor_clase_asignaciones",
            "profesor_disponibilidad",
            "profesor_especialidades",
            "profesor_evaluaciones",
            "profesor_horas_trabajadas",
            "profesor_suplencias",
            "profesor_suplencias_generales",
            "profesores",
            "profesores_horarios_disponibilidad",
            "professor_availability",
            "rutina_ejercicios",
            "rutinas",
            "scheduling_config",
            "sync_outbox",
            "theme_events",
            "theme_schedules",
            "theme_scheduling_config",
            "tipos_clases",
            "tipos_cuota",
            "usuario_estados",
            "usuario_etiquetas",
            "usuario_notas",
            "usuarios",
            "whatsapp_config",
            "whatsapp_messages",
            "whatsapp_templates"
          ],
          "backup_file": "cleanup_backups\\cleanup_backup_20251104_135737\\local_schema.json"
        }
      },
      {
        "server": "remote",
        "status": "success",
        "tables": [
          {
            "table": "usuarios",
            "record_count": 4,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_usuarios.json",
            "file_size_bytes": 2423
          },
          {
            "table": "pagos",
            "record_count": 1,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_pagos.json",
            "file_size_bytes": 406
          },
          {
            "table": "metodos_pago",
            "record_count": 5,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_metodos_pago.json",
            "file_size_bytes": 1610
          },
          {
            "table": "conceptos_pago",
            "record_count": 1,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_conceptos_pago.json",
            "file_size_bytes": 314
          },
          {
            "table": "configuracion",
            "record_count": 24,
            "file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_configuracion.json",
            "file_size_bytes": 6925
          }
        ],
        "total_records": 35,
        "backup_size_bytes": 11678,
        "backup_files": [
          "cleanup_backups\\cleanup_backup_20251104_135737\\remote_usuarios.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\remote_pagos.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\remote_metodos_pago.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\remote_conceptos_pago.json",
          "cleanup_backups\\cleanup_backup_20251104_135737\\remote_configuracion.json"
        ],
        "schema_backup": {
          "status": "success",
          "tables": [
            "acciones_masivas_pendientes",
            "asistencias",
            "audit_logs",
            "auditoria",
            "checkin_pending",
            "clase_asistencia_historial",
            "clase_ejercicios",
            "clase_lista_espera",
            "clase_usuarios",
            "clases",
            "clases_horarios",
            "comprobantes_pago",
            "conceptos_pago",
            "configuracion",
            "configuracion_comprobantes",
            "custom_themes",
            "ejercicio_grupo_items",
            "ejercicio_grupos",
            "ejercicios",
            "especialidades",
            "estados_usuario",
            "etiquetas",
            "historial_estados",
            "horarios_profesores",
            "metodos_pago",
            "node_state",
            "notificaciones_cupos",
            "numeracion_comprobantes",
            "pago_detalles",
            "pagos",
            "profesor_certificaciones",
            "profesor_clase_asignaciones",
            "profesor_disponibilidad",
            "profesor_especialidades",
            "profesor_evaluaciones",
            "profesor_horas_trabajadas",
            "profesor_suplencias",
            "profesor_suplencias_generales",
            "profesores",
            "profesores_horarios_disponibilidad",
            "rutina_ejercicios",
            "rutinas",
            "theme_schedules",
            "theme_scheduling_config",
            "tipos_clases",
            "tipos_cuota",
            "usuario_estados",
            "usuario_etiquetas",
            "usuario_notas",
            "usuarios",
            "whatsapp_config",
            "whatsapp_messages",
            "whatsapp_templates"
          ],
          "backup_file": "cleanup_backups\\cleanup_backup_20251104_135737\\remote_schema.json"
        }
      }
    ],
    "total_records": 71,
    "backup_size_bytes": 23812
  },
  "cleanup_summary": {
    "status": "success",
    "local_cleanup": {
      "server": "local",
      "status": "success",
      "tables_cleaned": 1,
      "records_removed": 5,
      "cleaned_tables": [
        {
          "table": "sync_outbox",
          "action": "delete_old_records",
          "records_removed": 5,
          "records_kept": 37
        }
      ],
      "errors": [
        {
          "table": "sync_inbox",
          "error": "no existe la relaci\u00f3n \u00absync_inbox\u00bb\nLINE 1: SELECT COUNT(*) FROM sync_inbox\n                             ^\n"
        }
      ]
    },
    "remote_cleanup": {
      "server": "remote",
      "status": "success",
      "tables_cleaned": 0,
      "records_removed": 0,
      "cleaned_tables": [],
      "errors": [
        {
          "table": "sync_outbox",
          "error": "relation \"sync_outbox\" does not exist\nLINE 1: SELECT COUNT(*) FROM sync_outbox\n                             ^\n"
        },
        {
          "table": "sync_inbox",
          "error": "current transaction is aborted, commands ignored until end of transaction block\n"
        }
      ]
    },
    "total_tables_cleaned": 1,
    "total_records_removed": 5
  },
  "reinit_summary": {
    "status": "error",
    "local_reinit": {
      "server": "local",
      "status": "success",
      "tables_optimized": 0,
      "indexes_created": 0,
      "constraints_validated": 0,
      "actions": []
    },
    "remote_reinit": {
      "server": "remote",
      "status": "success",
      "tables_optimized": 0,
      "indexes_created": 0,
      "constraints_validated": 0,
      "actions": []
    },
    "optimizations_applied": [],
    "replication_setup": {},
    "error": "'DatabaseCleanupReinitializer' object has no attribute '_apply_database_optimizations'"
  },
  "errors": [],
  "warnings": []
}